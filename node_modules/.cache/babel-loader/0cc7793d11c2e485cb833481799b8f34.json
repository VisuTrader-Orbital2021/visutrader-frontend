{"ast":null,"code":"var _jsxFileName = \"/home/richwill/workspace/visutrader-frontend/src/components/StockChart.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { getDailyStockChart } from \"./APIConnector\";\nimport CanvasJSReact from \"../assets/canvasjs.stock.react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet CanvasJSStockChart = CanvasJSReact.CanvasJSStockChart;\nconst CANDLESTICK = \"CANDLESTICK\";\nconst SPLINE_AREA = \"SPLINE AREA\";\nexport default function StockChart({\n  chartType,\n  company\n}) {\n  if (chartType === CANDLESTICK) {\n    return /*#__PURE__*/_jsxDEV(CandlestickChart, {\n      company: company\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 12\n    }, this);\n  } else if (chartType === SPLINE_AREA) {\n    return /*#__PURE__*/_jsxDEV(SplineAreaChart, {\n      company: company\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 12\n    }, this);\n  }\n}\n_c = StockChart;\n\nconst CandlestickChart = ({\n  company\n}) => {\n  _s();\n\n  const [stockData, setStockData] = useState([]);\n  useEffect(() => {\n    const fetchStockData = async () => {\n      const result = await getDailyStockChart(company);\n      setStockData(formatStockData(result.data[\"Time Series (Daily)\"]).slice(0, 250));\n    };\n\n    fetchStockData();\n  }, [company]);\n  return /*#__PURE__*/_jsxDEV(CanvasJSStockChart, {\n    options: {\n      theme: \"light2\",\n      charts: [{\n        axisX: {\n          tickLength: 0,\n          labelFormatter: function (e) {\n            return \"\";\n          },\n          crosshair: {\n            enabled: true,\n            snapToDataPoint: true,\n            labelFormatter: function (e) {\n              return \"\";\n            }\n          },\n          scaleBreaks: {\n            spacing: 0,\n            fillOpacity: 0,\n            lineThickness: 0,\n            customBreaks: stockData.reduce((breaks, value, index, array) => {\n              if (index === 0) return breaks;\n              const currentDataPointUnix = Number(new Date(value.date));\n              const previousDataPointUnix = Number(new Date(array[index - 1].date));\n              const oneDayInMs = 86400000;\n              const difference = previousDataPointUnix - currentDataPointUnix;\n              return difference === oneDayInMs ? breaks : [...breaks, {\n                startValue: currentDataPointUnix,\n                endValue: previousDataPointUnix - oneDayInMs\n              }];\n            }, [])\n          }\n        },\n        axisY: {\n          prefix: \"$\",\n          tickLength: 0\n        },\n        toolTip: {\n          shared: true\n        },\n        data: [{\n          name: \"Price (in USD)\",\n          yValueFormatString: \"$#,###.##\",\n          type: \"candlestick\",\n          risingColor: \"#04f77e\",\n          fallingColor: \"#ff3911\",\n          dataPoints: stockData.map(stockData => ({\n            x: new Date(stockData.date),\n            y: [stockData.open, stockData.high, stockData.low, stockData.close]\n          }))\n        }]\n      }],\n      navigator: {\n        data: [{\n          dataPoints: stockData.map(stockData => ({\n            x: new Date(stockData.date),\n            y: stockData.close\n          }))\n        }]\n      }\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CandlestickChart, \"UHMRx5rd6U+J7YyAJ82PYuAdhyc=\");\n\n_c2 = CandlestickChart;\n\nconst SplineAreaChart = ({\n  company\n}) => {\n  _s2();\n\n  const [stockData, setStockData] = useState([]);\n  useEffect(() => {\n    const fetchStockData = async () => {\n      const result = await getDailyStockChart(company);\n      setStockData(formatStockData(result.data[\"Time Series (Daily)\"]).slice(0, 250));\n    };\n\n    fetchStockData();\n  }, [company]);\n  return /*#__PURE__*/_jsxDEV(CanvasJSStockChart, {\n    options: {\n      theme: \"light2\",\n      charts: [{\n        axisX: {\n          crosshair: {\n            enabled: true,\n            snapToDataPoint: true,\n            valueFormatString: \"MMM DD YYYY\"\n          }\n        },\n        axisY: {\n          prefix: \"$\",\n          crosshair: {\n            enabled: true,\n            snapToDataPoint: true,\n            valueFormatString: \"$#,###.##\"\n          }\n        },\n        toolTip: {\n          shared: true\n        },\n        data: [{\n          name: \"Price (in USD)\",\n          type: \"splineArea\",\n          color: \"#3a4cb1\",\n          yValueFormatString: \"$#,###.##\",\n          xValueFormatString: \"MMM DD YYYY\",\n          dataPoints: stockData.map(stockData => ({\n            x: new Date(stockData.date),\n            y: stockData.close\n          }))\n        }]\n      }]\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(SplineAreaChart, \"UHMRx5rd6U+J7YyAJ82PYuAdhyc=\");\n\n_c3 = SplineAreaChart;\n\nfunction formatStockData(stockData) {\n  if (stockData === null) {\n    return;\n  } else {\n    return Object.entries(stockData).map(entries => {\n      const [date, priceData] = entries;\n      return {\n        date,\n        open: Number(priceData[\"1. open\"]),\n        high: Number(priceData[\"2. high\"]),\n        low: Number(priceData[\"3. low\"]),\n        close: Number(priceData[\"4. close\"])\n      };\n    });\n  }\n}\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StockChart\");\n$RefreshReg$(_c2, \"CandlestickChart\");\n$RefreshReg$(_c3, \"SplineAreaChart\");","map":{"version":3,"sources":["/home/richwill/workspace/visutrader-frontend/src/components/StockChart.js"],"names":["React","useState","useEffect","getDailyStockChart","CanvasJSReact","CanvasJSStockChart","CANDLESTICK","SPLINE_AREA","StockChart","chartType","company","CandlestickChart","stockData","setStockData","fetchStockData","result","formatStockData","data","slice","theme","charts","axisX","tickLength","labelFormatter","e","crosshair","enabled","snapToDataPoint","scaleBreaks","spacing","fillOpacity","lineThickness","customBreaks","reduce","breaks","value","index","array","currentDataPointUnix","Number","Date","date","previousDataPointUnix","oneDayInMs","difference","startValue","endValue","axisY","prefix","toolTip","shared","name","yValueFormatString","type","risingColor","fallingColor","dataPoints","map","x","y","open","high","low","close","navigator","SplineAreaChart","valueFormatString","color","xValueFormatString","Object","entries","priceData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getDailyStockChart } from \"./APIConnector\";\nimport CanvasJSReact from \"../assets/canvasjs.stock.react\";\nlet CanvasJSStockChart = CanvasJSReact.CanvasJSStockChart;\n\nconst CANDLESTICK = \"CANDLESTICK\";\nconst SPLINE_AREA = \"SPLINE AREA\";\n\nexport default function StockChart({ chartType, company }) {\n  if (chartType === CANDLESTICK) {\n    return <CandlestickChart company={company} />;\n  } else if (chartType === SPLINE_AREA) {\n    return <SplineAreaChart company={company} />;\n  }\n}\n\nconst CandlestickChart = ({ company }) => {\n  const [stockData, setStockData] = useState([]);\n\n  useEffect(() => {\n    const fetchStockData = async () => {\n      const result = await getDailyStockChart(company);\n      setStockData(\n        formatStockData(result.data[\"Time Series (Daily)\"]).slice(0, 250)\n      );\n    };\n    fetchStockData();\n  }, [company]);\n\n  return (\n    <CanvasJSStockChart\n      options={{\n        theme: \"light2\",\n        charts: [\n          {\n            axisX: {\n              tickLength: 0,\n              labelFormatter: function (e) {\n                return \"\";\n              },\n              crosshair: {\n                enabled: true,\n                snapToDataPoint: true,\n                labelFormatter: function (e) {\n                  return \"\";\n                },\n              },\n              scaleBreaks: {\n                spacing: 0,\n                fillOpacity: 0,\n                lineThickness: 0,\n                customBreaks: stockData.reduce(\n                  (breaks, value, index, array) => {\n                    if (index === 0) return breaks;\n                    const currentDataPointUnix = Number(new Date(value.date));\n                    const previousDataPointUnix = Number(\n                      new Date(array[index - 1].date)\n                    );\n                    const oneDayInMs = 86400000;\n                    const difference =\n                      previousDataPointUnix - currentDataPointUnix;\n                    return difference === oneDayInMs\n                      ? breaks\n                      : [\n                          ...breaks,\n                          {\n                            startValue: currentDataPointUnix,\n                            endValue: previousDataPointUnix - oneDayInMs,\n                          },\n                        ];\n                  },\n                  []\n                ),\n              },\n            },\n            axisY: {\n              prefix: \"$\",\n              tickLength: 0,\n            },\n            toolTip: {\n              shared: true,\n            },\n            data: [\n              {\n                name: \"Price (in USD)\",\n                yValueFormatString: \"$#,###.##\",\n                type: \"candlestick\",\n                risingColor: \"#04f77e\",\n                fallingColor: \"#ff3911\",\n                dataPoints: stockData.map((stockData) => ({\n                  x: new Date(stockData.date),\n                  y: [\n                    stockData.open,\n                    stockData.high,\n                    stockData.low,\n                    stockData.close,\n                  ],\n                })),\n              },\n            ],\n          },\n        ],\n        navigator: {\n          data: [\n            {\n              dataPoints: stockData.map((stockData) => ({\n                x: new Date(stockData.date),\n                y: stockData.close,\n              })),\n            },\n          ],\n        },\n      }}\n    />\n  );\n};\n\nconst SplineAreaChart = ({ company }) => {\n  const [stockData, setStockData] = useState([]);\n\n  useEffect(() => {\n    const fetchStockData = async () => {\n      const result = await getDailyStockChart(company);\n      setStockData(\n        formatStockData(result.data[\"Time Series (Daily)\"]).slice(0, 250)\n      );\n    };\n    fetchStockData();\n  }, [company]);\n\n  return (\n    <CanvasJSStockChart\n      options={{\n        theme: \"light2\",\n        charts: [\n          {\n            axisX: {\n              crosshair: {\n                enabled: true,\n                snapToDataPoint: true,\n                valueFormatString: \"MMM DD YYYY\",\n              },\n            },\n            axisY: {\n              prefix: \"$\",\n              crosshair: {\n                enabled: true,\n                snapToDataPoint: true,\n                valueFormatString: \"$#,###.##\",\n              },\n            },\n            toolTip: {\n              shared: true,\n            },\n            data: [\n              {\n                name: \"Price (in USD)\",\n                type: \"splineArea\",\n                color: \"#3a4cb1\",\n                yValueFormatString: \"$#,###.##\",\n                xValueFormatString: \"MMM DD YYYY\",\n                dataPoints: stockData.map((stockData) => ({\n                  x: new Date(stockData.date),\n                  y: stockData.close,\n                })),\n              },\n            ],\n          },\n        ],\n      }}\n    />\n  );\n};\n\nfunction formatStockData(stockData) {\n  if (stockData === null) {\n    return;\n  } else {\n  return Object.entries(stockData).map((entries) => {\n      const [date, priceData] = entries;\n      return {\n        date,\n        open: Number(priceData[\"1. open\"]),\n        high: Number(priceData[\"2. high\"]),\n        low: Number(priceData[\"3. low\"]),\n        close: Number(priceData[\"4. close\"]),\n      };\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}