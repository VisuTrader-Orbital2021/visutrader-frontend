{"ast":null,"code":"var _jsxFileName = \"/home/richwill/workspace/visutrader-frontend/src/components/Wallet.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport { AreaChart, XAxis, YAxis, Area, CartesianGrid, PieChart, Pie, Legend, Tooltip, ResponsiveContainer } from \"recharts\";\nimport Copyright from \"./Copyright\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { userSelector } from \"../redux/slices/user\";\nimport { getWalletDetail } from \"../redux/slices/wallet\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\nimport { parseISO, format } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  fillHeight: {\n    height: \"100%\"\n  },\n  cashFlowStyle: {\n    height: \"240px\"\n  }\n});\n\nfunction getBalanceHistory(initial, history, userJoinDate) {\n  history = [...history];\n  history.sort((a, b) => parseISO(b.createdAt) - parseISO(a.createdAt));\n  let timeline = [];\n  let currentValue = initial;\n  console.log(initial);\n  console.log(history);\n  history.forEach(({\n    amount,\n    createdAt\n  }) => {\n    timeline.push({\n      amount: currentValue,\n      date: format(parseISO(createdAt), \"MM/dd/yyyy\")\n    });\n    currentValue -= amount;\n  });\n  timeline.push({\n    amount: currentValue,\n    date: format(parseISO(userJoinDate), \"MM/dd/yyyy\")\n  });\n  return timeline.reverse();\n}\n\nexport default function Wallet({\n  classes,\n  fixedHeightPaper\n}) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const theme = useTheme();\n  const walletStyle = useStyles();\n  const user = useSelector(userSelector);\n\n  const RenderWallet = () => {\n    _s();\n\n    const dispatch = useDispatch();\n    const walletData = useSelector(state => state.wallet);\n    const userJoinDate = useSelector(state => state.user.dateJoined);\n    useEffect(() => {\n      dispatch(getWalletDetail()).then(unwrapResult).catch(err => {\n        alert(JSON.stringify(err));\n      });\n    }, [dispatch]);\n    const data = [{\n      name: \"Inflow\",\n      value: walletData.profit,\n      fill: \"#3FE06D\"\n    }, {\n      name: \"Outflow\",\n      value: walletData.expense,\n      fill: \"#E05555\"\n    }];\n    const timelineData = getBalanceHistory(walletData.balance, walletData.history, userJoinDate);\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: classes.content,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.appBarSpacer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        className: classes.container,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          spacing: 3,\n          alignItems: \"stretch\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            item: true,\n            spacing: 3,\n            alignItems: \"stretch\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              item: true,\n              spacing: 3,\n              xs: 4,\n              direction: \"column\",\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardContent, {\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h2\",\n                      children: \"Account Details\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      children: [\"Balance: $\", walletData.balance]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      children: [\"Expense: $\", walletData.expense]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      children: [\"Profit: $\", walletData.profit]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  children: /*#__PURE__*/_jsxDEV(CardContent, {\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h2\",\n                      children: \"Cash Flow\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n                      width: \"100%\",\n                      height: 400,\n                      children: /*#__PURE__*/_jsxDEV(PieChart, {\n                        width: 300,\n                        height: 300,\n                        children: [/*#__PURE__*/_jsxDEV(Pie, {\n                          dataKey: \"value\",\n                          data: data,\n                          startAngle: 90,\n                          endAngle: -270,\n                          cx: \"50%\",\n                          cy: \"50%\",\n                          outerRadius: 80,\n                          label: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 131,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 141,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 142,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 130,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 8,\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                classes: {\n                  root: walletStyle.fillHeight\n                },\n                children: /*#__PURE__*/_jsxDEV(CardContent, {\n                  classes: {\n                    root: walletStyle.fillHeight\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h2\",\n                    children: \"Balance Trend\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n                    width: \"100%\",\n                    height: 400,\n                    children: /*#__PURE__*/_jsxDEV(AreaChart, {\n                      width: 500,\n                      height: 400,\n                      data: timelineData,\n                      margin: {\n                        top: theme.spacing(3),\n                        right: theme.spacing(3)\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                        strokeDasharray: \"3 3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                        dataKey: \"date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                        dataKey: \"amount\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 167,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Area, {\n                        type: \"monotone\",\n                        dataKey: \"amount\",\n                        stroke: \"#8884d8\",\n                        fill: \"#8884d8\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 169,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(TableContainer, {\n              component: Paper,\n              children: /*#__PURE__*/_jsxDEV(Table, {\n                children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                  children: /*#__PURE__*/_jsxDEV(TableRow, {\n                    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                      align: \"center\",\n                      children: \"Date and Time\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      align: \"center\",\n                      children: \"Amount\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      align: \"center\",\n                      children: \"Market\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                  children: walletData.history.map(row => {\n                    return /*#__PURE__*/_jsxDEV(TableRow, {\n                      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                        component: \"th\",\n                        scope: \"row\",\n                        align: \"center\",\n                        children: format(parseISO(row.createdAt), \"MM/dd/yyyy HH:mm:ss O\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"center\",\n                        children: row.amount\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"center\",\n                        children: row.market\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 202,\n                        columnNumber: 27\n                      }, this)]\n                    }, row.amount + row.createdAt, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 25\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          pt: 4,\n          children: /*#__PURE__*/_jsxDEV(Copyright, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  };\n\n  _s(RenderWallet, \"x8N0VpPZW4MVORT1PMwapRUE/80=\", false, function () {\n    return [useDispatch, useSelector, useSelector];\n  });\n\n  if (user.authenticated) {\n    return RenderWallet();\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: classes.content,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.appBarSpacer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        className: classes.container,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          pt: 4,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h3\",\n            align: \"center\",\n            children: \"Sign up to unlock this feature\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          pt: 4,\n          children: /*#__PURE__*/_jsxDEV(Copyright, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s2(Wallet, \"BDfxY7+3u7M51+pwRoZZB0sn3KQ=\", false, function () {\n  return [useTheme, useStyles, useSelector];\n});\n\n_c = Wallet;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wallet\");","map":{"version":3,"sources":["/home/richwill/workspace/visutrader-frontend/src/components/Wallet.js"],"names":["React","useEffect","Container","Grid","Card","CardContent","Typography","Box","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","makeStyles","useTheme","AreaChart","XAxis","YAxis","Area","CartesianGrid","PieChart","Pie","Legend","Tooltip","ResponsiveContainer","Copyright","useDispatch","useSelector","userSelector","getWalletDetail","unwrapResult","parseISO","format","useStyles","fillHeight","height","cashFlowStyle","getBalanceHistory","initial","history","userJoinDate","sort","a","b","createdAt","timeline","currentValue","console","log","forEach","amount","push","date","reverse","Wallet","classes","fixedHeightPaper","theme","walletStyle","user","RenderWallet","dispatch","walletData","state","wallet","dateJoined","then","catch","err","alert","JSON","stringify","data","name","value","profit","fill","expense","timelineData","balance","content","appBarSpacer","container","root","top","spacing","right","map","row","market","authenticated"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  AreaChart,\n  XAxis,\n  YAxis,\n  Area,\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Legend,\n  Tooltip,\n  ResponsiveContainer,\n} from \"recharts\";\nimport Copyright from \"./Copyright\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { userSelector } from \"../redux/slices/user\";\nimport { getWalletDetail } from \"../redux/slices/wallet\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\nimport { parseISO, format } from \"date-fns\";\n\nconst useStyles = makeStyles({\n  fillHeight: {\n    height: \"100%\",\n  },\n  cashFlowStyle: {\n    height: \"240px\",\n  },\n});\n\nfunction getBalanceHistory(initial, history, userJoinDate) {\n  history = [...history];\n  history.sort((a, b) => parseISO(b.createdAt) - parseISO(a.createdAt));\n\n  let timeline = [];\n  let currentValue = initial;\n\n  console.log(initial);\n  console.log(history);\n\n  history.forEach(({ amount, createdAt }) => {\n    timeline.push({\n      amount: currentValue,\n      date: format(parseISO(createdAt), \"MM/dd/yyyy\"),\n    });\n\n    currentValue -= amount;\n  });\n\n  timeline.push({\n    amount: currentValue,\n    date: format(parseISO(userJoinDate), \"MM/dd/yyyy\"),\n  });\n\n  return timeline.reverse();\n}\n\nexport default function Wallet({ classes, fixedHeightPaper }) {\n  const theme = useTheme();\n  const walletStyle = useStyles();\n\n  const user = useSelector(userSelector);\n\n  const RenderWallet = () => {\n    const dispatch = useDispatch();\n    const walletData = useSelector((state) => state.wallet);\n    const userJoinDate = useSelector((state) => state.user.dateJoined);\n\n    useEffect(() => {\n      dispatch(getWalletDetail())\n        .then(unwrapResult)\n        .catch((err) => {\n          alert(JSON.stringify(err));\n        });\n    }, [dispatch]);\n\n    const data = [\n      { name: \"Inflow\", value: walletData.profit, fill: \"#3FE06D\" },\n      { name: \"Outflow\", value: walletData.expense, fill: \"#E05555\" },\n    ];\n\n    const timelineData = getBalanceHistory(\n      walletData.balance,\n      walletData.history,\n      userJoinDate\n    );\n\n    return (\n      <main className={classes.content}>\n        <div className={classes.appBarSpacer} />\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <Grid container direction=\"column\" spacing={3} alignItems=\"stretch\">\n            <Grid container item spacing={3} alignItems=\"stretch\">\n              <Grid container item spacing={3} xs={4} direction=\"column\">\n                <Grid item>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h2\">Account Details</Typography>\n                      <Typography variant=\"body1\">\n                        Balance: ${walletData.balance}\n                      </Typography>\n                      <Typography variant=\"body1\">\n                        Expense: ${walletData.expense}\n                      </Typography>\n                      <Typography variant=\"body1\">\n                        Profit: ${walletData.profit}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n\n                <Grid item>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h2\">Cash Flow</Typography>\n                      <ResponsiveContainer width=\"100%\" height={400}>\n                        <PieChart width={300} height={300}>\n                          <Pie\n                            dataKey=\"value\"\n                            data={data}\n                            startAngle={90}\n                            endAngle={-270}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            outerRadius={80}\n                            label\n                          />\n                          <Legend />\n                          <Tooltip />\n                        </PieChart>\n                      </ResponsiveContainer>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              </Grid>\n\n              <Grid item xs={8}>\n                <Card classes={{ root: walletStyle.fillHeight }}>\n                  <CardContent classes={{ root: walletStyle.fillHeight }}>\n                    <Typography variant=\"h2\">Balance Trend</Typography>\n                    <ResponsiveContainer width=\"100%\" height={400}>\n                      {/* TODO: Fix width. XAxis label seems to be cut on right side. */}\n                      <AreaChart\n                        width={500}\n                        height={400}\n                        data={timelineData}\n                        margin={{\n                          top: theme.spacing(3),\n                          right: theme.spacing(3),\n                        }}\n                      >\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis dataKey=\"date\" />\n                        <YAxis dataKey=\"amount\" />\n                        <Tooltip />\n                        <Area\n                          type=\"monotone\"\n                          dataKey=\"amount\"\n                          stroke=\"#8884d8\"\n                          fill=\"#8884d8\"\n                        />\n                      </AreaChart>\n                    </ResponsiveContainer>\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n            <Grid item>\n              <TableContainer component={Paper}>\n                <Table>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell align=\"center\">Date and Time</TableCell>\n                      <TableCell align=\"center\">Amount</TableCell>\n                      <TableCell align=\"center\">Market</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {walletData.history.map((row) => {\n                      return (\n                        <TableRow key={row.amount + row.createdAt}>\n                          <TableCell component=\"th\" scope=\"row\" align=\"center\">\n                            {format(\n                              parseISO(row.createdAt),\n                              \"MM/dd/yyyy HH:mm:ss O\"\n                            )}\n                          </TableCell>\n                          <TableCell align=\"center\">{row.amount}</TableCell>\n                          <TableCell align=\"center\">{row.market}</TableCell>\n                        </TableRow>\n                      );\n                    })}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </Grid>\n          </Grid>\n\n          <Box pt={4}>\n            <Copyright />\n          </Box>\n        </Container>\n      </main>\n    );\n  };\n\n  if (user.authenticated) {\n    return RenderWallet();\n  } else {\n    return (\n      <main className={classes.content}>\n        <div className={classes.appBarSpacer} />\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <Box pt={4}>\n            <Typography variant=\"h3\" align=\"center\">\n              Sign up to unlock this feature\n            </Typography>\n          </Box>\n          <Box pt={4}>\n            <Copyright />\n          </Box>\n        </Container>\n      </main>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}